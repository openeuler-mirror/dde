# 项目报告

## 项目信息

- 项目名称：

  优化 dde 桌面启动过程的黑屏时间。

- 方案描述：

  操作系统启动先启动xorg获取屏幕显示，然后应用程序通过x11 api 打印显示到xorg 后端。

  当前的问题是，xorg起来后，没有程序及时的打印显示到xorg后端，所以屏幕显示黑屏。

  我们要做的是缩短打印时间。

  首先，我排查了lightdm+dde 的启动过程。优化了dde启动流程。

  1. 首先把dde启动需要的程序，提前拉起来，不再通过session-shell 拉起来。这样减少了等待依赖服务的启动时间。
  2. 把dde登陆程序中，无需的初始化流程注释掉。只保留必要的流程。缩短启动时间。

- 时间规划：

  - 2024/01/01~2024/07/01
    1. dde 桌面系统熟悉，主要了解了启动相关的dde-session-shell
    2. 学习基础的c++和qt
  - 2024/07/02~2024/09/15
    1. dde-session-shell 补丁执着
    2. 项目代码提交到https://gitee.com/openeuler/dde

## 项目进度：

- 已完成工作

  - 预先启动依赖服务
  - 修改注释无关的启动程序

  整体优化时间在20%左右。但是有一定的随机性。下表是分析的数据：

  | 用例                     | 时间 (ms) | 优化率 (%) |
  | ------------------------ | --------- | ---------- |
  | 优化前登陆第一次黑屏时间 | 3291      | -          |
  | 优化前登陆第二次黑屏时间 | 2980      | -          |
  | 优化前登陆第三次黑屏时间 | 3176      | -          |
  | 优化后登陆第一次黑屏时间 | 2130      | 32.35      |
  | 优化后登陆第二次黑屏时间 | 2968      | 5.75       |
  | 优化后登陆第三次黑屏时间 | 2439      | 22.55      |

- 遇到的问题及解决方案

  - 不熟悉qt语法：前期主要是学习一些基础的qt知识。
  - 不熟悉dde：根据老师给的deepin社区链接学习。

- 后续工作安排

  - 加入sig-dde 的打包维护中。持续优化dde启动时间

